# Django Development Reference Guide

## Table of Contents
1. [Initial Setup](#initial-setup)
2. [Django Installation](#django-installation)
3. [Creating Projects & Apps](#creating-projects--apps)
4. [URL Routing & Views](#url-routing--views)
5. [Templates](#templates)
6. [Static Files](#static-files)
7. [Models & Database](#models--database)
8. [Admin Interface](#admin-interface)

---

## Initial Setup

### 1. Install Python and Setup Environment
```bash
# Check Python installation
python --version

# Check pip installation
pip --version

# List installed packages
pip list
```

---

## Django Installation

### Install Django
```bash
pip install django
```

### Troubleshooting pip Installation Errors

**Option 1:** Run CMD as Administrator
```bash
pip install package_name
```

**Option 2:** Install for current user only
```bash
pip install django --user
```

**Option 3:** Modify virtual environment settings
- Navigate to: `User > AppData > Local > Programs > Python > pyvenv.cfg`
- Change `include-system-site-packages = false` to `true`
- Save and retry the installation

**Option 4:** If `django-admin` command fails
- Uninstall Python completely
- Install a fresh version
- Run `django-admin` again

---

## Creating Projects & Apps

### Create a New Django Project
```bash
# Create project
django-admin startproject My_First_Project

# Navigate to project directory
cd My_First_Project

# Run development server (default port 8000)
python manage.py runserver

# Run on custom port
python manage.py runserver 7000
```

### Recommended VS Code Extensions
1. Django
2. Django IntelliSense
3. Copy Django Model Field
4. Django Snippet
5. Sourcery
6. Python

### Django Project Structure
A Django project is a combination of multiple applications. Each app handles specific functionality:
- Registration
- Comments
- Login
- Blog
- etc.

### Create an App Inside Your Project
```bash
# Create a new app
python manage.py startapp first_app
```

### Register App in Project Settings
**File:** `My_First_Project/settings.py`
```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'first_app',  # Add your app here
]
```

---

## URL Routing & Views

### MVT vs MVC Pattern
Django uses **MVT (Model-View-Template)** pattern:
```
Browser â†’ urls.py (Routes) â†’ views.py (Controller) â†’ Template (Views)
```

**Flow:**
1. User visits: `www.example.com/about`
2. URLs file routes to appropriate view function
3. View processes logic and returns response
4. Template renders the HTML

### Basic View Setup

**File:** `first_app/views.py`
```python
from django.shortcuts import render
from django.http import HttpResponse


def home(request):
    return HttpResponse('<h1>Home Page</h1> <a href="/contact">Contact</a> <a href="/about">About</a>')

def about(request):
    return HttpResponse('<h1>About Page</h1> <a href="/contact">Contact</a> <a href="/">Home</a>')

def contact(request):
    return HttpResponse('<h1>Contact Page</h1> <a href="/">Home</a> <a href="/about">About</a>')
```

**File:** `My_First_Project/urls.py`
```python
from django.contrib import admin
from django.urls import path
from first_app import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.home, name='home'),  # Default route
    path('home/', views.home, name='home'),
    path('contact/', views.contact, name='contact'),
    path('about/', views.about, name='about'),
]
```

### App-Level URL Configuration

For better organization, create separate URL files for each app.

**File:** `first_app/urls.py` (Create this file)
```python
from django.urls import path
from first_app import views

urlpatterns = [
    path('', views.index, name='index'),
    path('home/', views.home, name='home'),
    path('contact/', views.contact, name='contact'),
]
```

**File:** `My_First_Project/urls.py` (Main project URLs)
```python
from django.contrib import admin
from django.urls import path, include
from first_app import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.index, name='index'),
    path('first_app/', include('first_app.urls')),  # Include app URLs
]
```

**URL Pattern Result:**
- `http://127.0.0.1:8000/` â†’ calls `views.index`
- `http://127.0.0.1:8000/first_app/` â†’ calls `first_app.views.index`
- `http://127.0.0.1:8000/first_app/home/` â†’ calls `first_app.views.home`

---

## Templates

### Setup Template Directory

**File:** `My_First_Project/settings.py`
```python
import os
from pathlib import Path

# Base directory path
BASE_DIR = Path(__file__).resolve().parent.parent

# Template directory path
TEMPLATES_DIR = BASE_DIR / 'templates'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [TEMPLATES_DIR],  # Add templates directory
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

### Understanding Path Configuration
```python
# Print current file path
print(__file__)  # Full path to current file

# Get base directory (project root)
print(Path(__file__).resolve().parent.parent)

# Alternative using os module
print(os.path.dirname(os.path.dirname(__file__)))

# Join paths
print(os.path.join(BASE_DIR, 'templates'))
```

### Create Template Structure
```
My_First_Project/
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ first_app/
â”‚       â””â”€â”€ index.html
```

### Render Templates with Context

**File:** `first_app/views.py`
```python
from django.shortcuts import render
from django.http import HttpResponse


def index(request):
    context = {
        "name": "Shuvo",
        "age": 25,
        "title": "Home Page"
    }
    return render(request, 'first_app/index.html', context=context)
```

**File:** `templates/first_app/index.html`
```html
<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
</head>
<body>
    <h1>Welcome to {{ title }}</h1>
    <p>Name: {{ name }}</p>
    <p>Age: {{ age }}</p>
</body>
</html>
```

**Template Syntax:**
- `{{ variable }}` - Display variables
- `{% tag %}` - Template tags (if/else, for loops, etc.)
- `{% comment %}...{% endcomment %}` - Comments

---

## Static Files

Static files include CSS, JavaScript, images, and other assets.

### Configure Static Files

**File:** `My_First_Project/settings.py`
```python
from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

# Static files directory
STATIC_DIR = BASE_DIR / 'static'

STATIC_URL = '/static/'

STATICFILES_DIRS = [
    STATIC_DIR,
]
```

### Create Static Files Structure
```
My_First_Project/
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ script.js
â”‚   â””â”€â”€ img/
â”‚       â””â”€â”€ logo.png
```

### Use Static Files in Templates

**File:** `templates/first_app/index.html`
```html
<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>Welcome to Django</h1>
    <img src="{% static 'img/logo.png' %}" alt="Logo">
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
```

**Test static file access:**
```
http://127.0.0.1:8000/static/img/logo.png
```

---

## Models & Database

Django uses ORM (Object-Relational Mapping) to interact with databases.

### Define Models

**File:** `first_app/models.py`
```python
from django.db import models


class Musician(models.Model):
    # id field is created automatically by Django
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    instrument = models.CharField(max_length=50)
    
    def __str__(self):
        return f"{self.first_name} {self.last_name}"


class Album(models.Model):
    artist = models.ForeignKey('Musician', on_delete=models.CASCADE)
    name = models.CharField(max_length=50)
    release_date = models.DateField()
    
    # Rating choices
    RATING_CHOICES = [
        (1, 'Bad'),
        (2, 'Not Bad'),
        (3, 'Good'),
        (4, 'Very Good'),
        (5, 'Awesome'),
    ]
    num_stars = models.IntegerField(choices=RATING_CHOICES)
    
    def __str__(self):
        return f"{self.name} - Rating: {self.num_stars}"
```

### Field Options
- `max_length` - Maximum character length
- `null=True` - Allow NULL values in database
- `blank=True` - Allow empty values in forms
- `default` - Default value
- `choices` - Dropdown options

### Apply Database Changes
```bash
# Create migration files
python manage.py makemigrations first_app

# Apply migrations to database
python manage.py migrate
```

**Always run these commands after modifying models!**

### Interact with Models via Shell
```bash
# Open Django shell
python manage.py shell
```

```python
# Import models
from first_app.models import Musician, Album

# View all records
print(Musician.objects.all())

# Create a new record
musician = Musician(
    first_name='Md. Ashraful',
    last_name='Shuvo',
    instrument='Guitar'
)
musician.save()

# Query records
Musician.objects.filter(first_name='Ashraful')
Musician.objects.get(id=1)
Musician.objects.order_by('first_name')
```

### Display Model Data in Templates

**File:** `first_app/views.py`
```python
from django.shortcuts import render
from first_app.models import Musician, Album


def index(request):
    # Get all musicians ordered by first name
    musician_list = Musician.objects.order_by('first_name')
    
    context = {
        'title': 'All Musicians',
        'musicians': musician_list
    }
    
    return render(request, 'first_app/index.html', context=context)
```

**File:** `templates/first_app/index.html`
```html
<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>{{ title }}</h1>
    
    <table border="1">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Instrument</th>
            </tr>
        </thead>
        <tbody>
            {% for musician in musicians %}
            <tr>
                <td>{{ musician.first_name }}</td>
                <td>{{ musician.last_name }}</td>
                <td>{{ musician.instrument }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
```

---

## Admin Interface

Django provides a powerful admin interface out of the box.

### Register Models

**File:** `first_app/admin.py`
```python
from django.contrib import admin
from first_app.models import Musician, Album

# Register models
admin.site.register(Musician)
admin.site.register(Album)
```

### Create Superuser
```bash
python manage.py createsuperuser
```

Follow the prompts to create:
- Username
- Email (optional)
- Password

### Access Admin Panel
1. Start development server: `python manage.py runserver`
2. Navigate to: `http://127.0.0.1:8000/admin`
3. Login with superuser credentials
4. Manage your models through the interface

---

## Quick Reference Commands

```bash
# Start new project
django-admin startproject project_name

# Create new app
python manage.py startapp app_name

# Run development server
python manage.py runserver
python manage.py runserver 8080  # Custom port

# Database operations
python manage.py makemigrations
python manage.py makemigrations app_name
python manage.py migrate

# Create admin user
python manage.py createsuperuser

# Open Django shell
python manage.py shell

# Collect static files (production)
python manage.py collectstatic
```

---

## Key Concepts Summary

- **MVT Pattern**: Model-View-Template (Django's architecture)
- **Models**: Database tables defined as Python classes
- **Views**: Python functions that handle requests and return responses
- **Templates**: HTML files with Django template language
- **URLs**: Route configuration that maps URLs to views
- **Static Files**: CSS, JavaScript, images served by Django
- **Admin**: Auto-generated interface for managing models

---

## Best Practices

1. Always activate virtual environment before working
2. Run migrations after model changes
3. Use meaningful names for apps, models, and views
4. Organize URLs at app-level for large projects
5. Use `{% load static %}` at the top of templates using static files
6. Never hardcode URLs - use `{% url 'name' %}` template tag
7. Keep sensitive data (SECRET_KEY) secure and use environment variables
8. Set `DEBUG = False` in production

---

*Happy Django Development!* ðŸš€
